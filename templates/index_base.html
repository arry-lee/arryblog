{% extends 'base.html' %}
{% load cache %}
{% load staticfiles %}
{% load user_tags %}
{% block title %}阿锐的博客-首页{% endblock title %}


{% block container %}
	<div class="container">
		<div class="row clearfix">
			<div class="col-md-2 column">
				<div class="row">

					<div class="col-sm-4 col-md-12 column">
						{% cache 500 gravatar%}
						{{user.email|gravatar:460}}
						{% endcache %}
					</div>

					<div class="col-sm-8 col-md-12 column">
						{% if user.nickname %}
						<p class="username">{{user.nickname}}</p>
						{% elif user.username%}
						<p class="username">{{user.username}}</p>
						{% else %}
						<p class="username">Arry Lee</p>
						{% endif %}
						{% if user.slogon %}
						<p class="slogon">{{user.slogon}}</p>
						{% else %}
						<p class="slogon">A real romantic youth.</p>
						{% endif %}
						<p class="location"><span class="glyphicon glyphicon-map-marker"aria-hidden="true"></span>中国 南京</p>

<!-- 						<button type="button" class="btn btn-sm btn-block" data-toggle="modal" data-target="#contactme">联系我</button> -->
					</div>

					<div class="col-sm-12 col-md-12 column">
						<div style="margin-top:40px;">
							<blockquote>
							<p>
								{{quote.quote}}
							</p> 
							<p>
								{{quote.translation}}
							</p>
							<small><cite>{{quote.source}}</cite></small>
							</blockquote>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-9 column">
				<div class="tabbable" id="tabs-573644">
					<ul class="nav nav-tabs" id="nav0">
						<li class="{% if isindex %}active{% endif %}">
							 <a href="#panel-0" data-toggle="tab" id="p0">动态{% if articletype_counter %}<span class="Counter">{{article_counter}}</span>{% endif %}</a>
						</li>
						<li class="{% if not isindex %}active{% endif %}">
							 <a href="#panel-1" data-toggle="tab" id="p1">文章</a>
						</li>
						<li>
							 <a href="#panel-2" data-toggle="tab" id="p2">项目{% if articletype_counter %}<span class="Counter">{{articletype_counter}}</span>{% endif %}</a>
						</li>
						<li>
							 <a href="#panel-3" data-toggle="tab" id="p3">想法 </a>
						</li>
<!-- 						<li>
							 <a href="#panel-4" data-toggle="tab" id="p4">关注 <span class="Counter">0</span></a>
						</li>
						<li>
							 <a href="#panel-5" data-toggle="tab" id="p5">粉丝 <span class="Counter">0</span></a>
						</li>	 -->																			
					</ul>

					<div class="tab-content">
						<div class="tab-pane {% if isindex %}active{% endif %}" id="panel-0">
							{% block panel-0 %}
							{% endblock panel-0%}
						</div>
						<div class="tab-pane {% if not isindex %}active{% endif %}" id="panel-1">
							{% block panel-1 %}
							{% endblock panel-1%}
						</div>	
						<div class="tab-pane" id="panel-2">
							{% block panel-2 %}
							{% endblock panel-2%}
						</div>
						<div class="tab-pane" id="panel-3">
							{% block panel-3 %}
							{% endblock panel-3%}
						</div>
						<div class="tab-pane" id="panel-4">
							{% block panel-4 %}
							{% endblock panel-4%}
						</div>	
						<div class="tab-pane" id="panel-5">
							{% block panel-5 %}
							{% endblock panel-5%}
						</div>																														
					</div>

				</div>
			</div>
		</div>
	</div>
{% endblock container %}


{% block bottom %}
<footer class="main-footer small text-center">
<div class="container">
	<div class="row">
		<div class="col-sm-4">
			<small>网站备案号:皖ICP备19005956号-1</small>
		</div>

		<div class="col-sm-4">
			<small>Copyright ©2018-2019. Powered by Django</small>
		</div>

		<div class="col-sm-4">
			<small><a href="https://github.com/arry-lee">Github</a></small>
		</div>
	</div>
</div>
</footer>

<!-- <div class="modal fade bs-example-modal-lg" id="contactme" tabindex="-2" role="dialog" aria-labelledby="exampleModalLabel">
  <div class="modal-dialog" role="document">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title" id="exampleModalLabel">联系我</h4>
	  </div>
	  <div class="modal-body">
		<form>
		  <div class="form-group">
			<label for="subject" class="control-label">主题:</label>
			<input type="text" class="form-control" id="subject">
		  </div>
		  <div class="form-group">
			<label for="content" class="control-label">正文:</label>
			<textarea class="form-control" id="content"></textarea>
		  </div>
		  <div class="form-group">
			<label for="email" class="control-label">邮箱:</label>
			<input type="email" class="form-control" id="email">
		  </div>
		</form>
	  </div>
	  <div class="modal-footer">
		<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
		{% csrf_token %}
		<button type="button" class="btn btn-primary" id="send">发送</button>
	  </div>
	</div>
  </div>

<script type="text/javascript">
	$(function () {
		$('#send').on('click', function () {
			$subject = $('#subject').val()
			$content = $('#content').val()
			$email = $('#email').val()
			// 必须要有csrftoken认证
			csrf = $('input[name="csrfmiddlewaretoken"]').val()
			$.ajax({
				url: 'contact/',
				type: 'POST',
				dataType: 'json',
				data:{'subject':$subject,
					'content':$content,
					'email':$email,
					'csrfmiddlewaretoken':csrf}
			})
			.done(function(data) {
				if (data.code=='1') {
					$('#contactme').modal('hide');
					alert('邮件发送成功！');
				} else {
					alert('数据不完整，请重试！');
				}
				
			})
			.fail(function() {
				alert('服务器超时，请重试！');
			});
		})
	});	
</script> -->
{% endblock bottom %}